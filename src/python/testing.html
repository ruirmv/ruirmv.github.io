<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing</title>
    <link rel="stylesheet" href="../../style/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:400,500,700|Roboto:400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
</head>
<body>
<main>
    <h1>Testing</h1>

    <div class="comment">Write tests with the built-in <strong>unittest</strong> only.</div>

    <h2>Conventions</h2>

    <p>1. The first argument of asserts is always the expected value.</p>
    <code class="block">
        <ol>
            <li>self.assertEqual(expected, actual)</li>
        </ol>
    </code>

    <p>2. Write table tests whenever possible, as it's easier to add test cases later. See the pattern.</p>
    <code class="block">
        <ol>
            <li>import unittest</li>
            <li>from dataclasses import dataclass</li>
            <li><br></li>
            <li><br></li>
            <li>class TestClass(unittest.TestCase):</li>
            <li><br></li>
            <li><pre>   def test_case(self):</pre></li>
            <li><pre>       @dataclass(frozen=True)</pre></li>
            <li><pre>       class Test:</pre></li>
            <li><pre>           name: str</pre></li>
            <li><pre>           data: Type</pre></li>
            <li><pre>           expected: Type</pre></li>
            <li><br></li>
            <li><pre>       tests = [</pre></li>
            <li><pre>           Test(</pre></li>
            <li><pre>               ...</pre></li>
            <li><pre>           ),</pre></li>
            <li><pre>           ...</pre></li>
            <li><pre>       ]</pre></li>
            <li><br></li>
            <li><pre>       for test in tests:</pre></li>
            <li><pre>           with self.subTest(test.name):</pre></li>
            <li><pre>               actual = ...</pre></li>
            <li><pre>               self.assertEqual(test.expected, actual)</pre></li>
        </ol>
    </code>

    <h2>unittest</h2>

    <p>To test exceptions, use the following code snippet.</p>
    <code class="block">
        <ol>
            <li>...</li>
            <li>for test in tests:</li>
            <li><pre>   with self.subTest(test.name), self.assertRaises(test.expected):</pre></li>
            <li><pre>       action(test.data, ...)</pre></li>
        </ol>
    </code>

    <h2>Runners</h2>
    <p>Whenever possible, you should use the <strong>pydest-xdist</strong> runner to ensure the tests run in parallel.</p>
    <div class="comment">Pycharm only identifies subtest output properly if using the <strong>unittest</strong> runner.</div>
</main>
</body>
</html>